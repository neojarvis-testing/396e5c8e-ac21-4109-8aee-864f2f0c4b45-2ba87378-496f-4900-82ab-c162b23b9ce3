<app-farmer-navbar></app-farmer-navbar>
<div class="container mt-4" style="max-width: 600px;">
  <h2 class="mb-4 text-center">{{ cropId ? 'Update Crop' : 'Add Crop' }}</h2>

  <form [formGroup]="cropForm" (submit)="onSubmit()">
    <!-- Crop Name -->
    <div class="mb-3">
      <label class="form-label w-100">Crop Name <span class="text-danger">*</span>
        <input type="text" class="form-control my-2" formControlName="cropName">
        <div *ngIf="cropForm.controls['cropName'].touched && cropForm.controls['cropName'].errors" class="text-danger">
          <div *ngIf="cropForm.controls['cropName'].errors['required']">Crop Name is required</div>
        </div>
      </label>
      </div>

    <div class="mb-3">
      <label class="form-label w-100">Crop Type <span class="text-danger">*</span>
        <select class="form-select my-2" formControlName="cropType">
          <option value="">Select Crop Type</option>
          <option *ngFor="let type of cropTypes" [value]="type">{{ type }}</option>
        </select>
        <div *ngIf="cropForm.controls['cropType'].touched && cropForm.controls['cropType'].invalid" class="text-danger">
          Crop Type is required
        </div>
      </label>
    </div>

    <div class="mb-3">
      <label class="form-label w-100">Description <span class="text-danger">*</span>
        <textarea class="form-control my-2" formControlName="description"></textarea>
        <div *ngIf="cropForm.controls['description'].touched && cropForm.controls['description'].errors" class="text-danger">
          <div *ngIf="cropForm.controls['description'].errors['required']">Description is required</div>
        </div>
      </label>
    </div>

    <div class="mb-3">
      <label class="form-label w-100">Planting Date <span class="text-danger">*</span>
        <input type="date" class="form-control my-2" formControlName="plantingDate" [min]="today">
        <div *ngIf="cropForm.controls['plantingDate'].touched && cropForm.controls['plantingDate'].invalid" class="text-danger">
          Planting Date is required
        </div>
      </label>
    </div>

    <button type="submit" class="btn btn-primary w-100">
      {{ cropId ? 'Update Crop' : 'Add Crop' }}
    </button>
  </form>



  
  <!-- Success Modal -->
  <div class="modal fade" id="successModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content text-center p-4">
        <h5 class="modal-title">Successfully {{ cropId ? 'Updated' : 'Added' }}</h5>
        <button class="btn btn-success mt-3" (click)="navigateToViewCrop()" data-bs-dismiss="modal">Ok</button>
      </div>
    </div>
  </div>
</div>
